<?php

/**
 * Implements hook_block_info().
 */
function laliste_homepage_block_info() {
  $blocks = array();
  $blocks['home_search'] = array(
    'info' => t('Home Search Block'),
  );
  $blocks['home_highlight'] = array(
    'info' => t('Home Highlight Block'),
  );
  $blocks['home_methodology'] = array(
    'info' => t('Home Methodology Block'),
  );

  return $blocks;
}

/**
 * Implements hook_block_view().
 */
function laliste_homepage_block_view($delta='') {
  $block = array();

  switch($delta) {
    case 'home_search':
      $block = generate_home_search_block();
    break;
    case 'home_highlight':
      $block = generate_home_highlight_block();
    break;
    case 'home_methodology':
      $block = generate_home_methodology_block();
  }

  return $block;
}

function generate_home_methodology_block(){
  $block = array();
  $block['subject'] = '';
  $block['content'] = "
  <div class='method-container'>
    <div class='method-main-title'>".t('Our Method')."</div>
    <div class='method-content-block1'>".t('While it was until recently reserved for an elite, global gastronomy is changing fast. All around the world, it has entered daily life through entertainment and images, while new culinary cultures are emerging constantly, happily renewing the codes of cooking, the world’s “oldest art”')."
    </div>
    <div class='method-title method-experts'>".t('Our Experts')."</div>
    <div class='method-content-block2'>
      <img src='".base_path().path_to_theme().'/img/our-experts.png'."' alt=''>
    </div>
    <div class='method-title method-algorithm'>".t('Our Algorithm')."</div>
    <div class='method-content-block3'>
      <img src='".base_path().path_to_theme().'/img/our-algorithm.png'."' alt=''>
    </div>
    <div class='method-title method-liste'>".t('Our Liste')."</div>
    <div class='method-content-block4'>
      <img src='".base_path().path_to_theme().'/img/our-liste.png'."' alt=''>
    </div>
  </div>
  <div class='method-link'><a href='our-method'>".t('Discover How we did it!')."</a></div>";
  return $block;
}

function generate_home_highlight_block() {
  $block = array();
  $block['subject'] = '';
  $block['content'] = "
  <div class='highlight-container'>
    <div class='highlight-title'>".t('PRÉSENTATION')."</div>
    <div class='highlight-content-container'>
      <div class='highlight-content-column'><p>While it was until recently reserved for an elite, global gastronomy is changing fast. All around the world, it has entered daily life through entertainment and images, while new culinary cultures are emerging constantly, happily renewing the codes of cooking, the world’s “oldest art”.</p>
      </div>
      <div class='highlight-content-column'><p>Happily renewing the codes of cooking, the world’s “oldest art”. Food guides are the arbiters of good taste and highlight the great gastronomic venues based on various criteria, as well as picking our more modest eateries. Online review sites reveal multiple, and sometimes contradictory, opinions.</p>
      </div>
      <div class='highlight-content-column'><p>Happily renewing the codes of cooking, the world’s “oldest art”. Food guides are the arbiters of good taste and highlight the great gastronomic venues based on various criteria, as well as picking our more modest eateries. Online review sites reveal multiple, and sometimes contradictory, opinions.</p>
      </div>
  </div>";
 /* $block['content'] = "
  <div class='highlight-container'>
    <!--<div class='highlight-title'>".t('PRÉSENTATION')."</div>-->
    <div class='highlight-content-container'>
      <div class='highlight-content-column'><h2>Avant de voyager, consultez La Liste!</h2><p>La Liste établit le classement des 1000 restaurants d'exception sur les cinq continents : liste mondiale, par carte interactive, par pays. Cliquez sur les drapeaux pour voyager parmis les cuisines du monde.</p>
      </div>
      <div class='highlight-content-column'><p>La Liste ne compare pas les cuisines mais classe les restaurants. Elle recense et harmonise les jugements des guides nationaux de 44 pays -  cuisine, cadre, service, accueil, cave -  en y ajoutant les notes publiées par les sites participatifs. Un lien permet de consulter chaque source d'information.</p>
      </div>
      <div class='highlight-content-column'><p>Le système informatique qui intègre ces calculs s'appuie sur des chiffres qui reflètent le plaisir éprouvé par les dégustateurs (inspecteurs des guides ou particuliers) devant des mets parfois très différents!
      </div>
  </div>";*/
  return $block;
}

/**
 * Custom function to assemble renderable array for block content.
 * Returns a renderable array with the block content.
 * @return
 *   returns a renderable array of block content.
 */
function generate_home_search_block() {
  $block = array();

  // Capture the image file path and form into HTML with attributes
  $image_file = file_load(variable_get('block_image_fid', ''));
  $image_path = '';

  if (isset($image_file->uri)) {
    $image_path = $image_file->uri;
  }

  $image = theme_image(array(
    'path' => ($image_path),
    'alt' => t('Image description here.'),
    'title' => t('This is our block image.'),
    'attributes' => array('class' => 'class_name'),
  ));

  // Capture WYSIWYG text from the variable
  $text = variable_get('text_variable', '');

  // Block output in HTML with div wrapper
  $block = array(
    'image' => array(
      '#prefix' => '',
      '#type' => 'markup',
      '#markup' => $image,
    ),
    'message' => array(
      '#type' => 'markup',
      '#markup' => $text,
      '#suffix' => '',
    ),
  );

  return $block;
}
